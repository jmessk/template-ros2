services:
  dev:
    build:
      context: .
      dockerfile: ./Dockerfile.dev
      args:
        - UID=1000
        - GID=1000
    environment:
      - ROS_DOMAIN_ID=10
      # - DISPLAY=$DISPLAY # for GUI
      # - FASTRTPS_DEFAULT_PROFILES_FILE=/tmp/fastrtps-profile.xml # for FastRTPS. depricated.
    volumes:
      - .:/home/user/ros2_ws

      # for GUI:
      # - /tmp/.X11-unix:/tmp/.X11-unix
      # - ~/.Xauthority:/home/user/.Xauthority # (over SSH)

      # for mDNS:
      # - /var/run/dbus:/var/run/dbus
      # - /var/run/avahi-daemon/socket:/var/run/avahi-daemon/socket

      # - ./fastrtps-profile.xml:/tmp/fastrtps-profile.xml # for FastRTPS. depricated.

    network_mode: host
    ipc: host
    tty: true
